document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".attendance-button").forEach(a=>{a.addEventListener("click",s=>{s.preventDefault();const n=a.getAttribute("data-staff-id"),r=a.getAttribute("data-date"),t=a.querySelector("svg");fetch("/managements/attendance/store",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({staff_id:n,date:r})}).then(e=>e.json()).then(e=>{e.success?t.classList.contains("text-gray-300")?(t.classList.remove("text-gray-300"),t.classList.add("text-green-500")):(t.classList.remove("text-green-500"),t.classList.add("text-gray-300")):alert(e.message||"Failed to update attendance.")}).catch(e=>{console.error("Error:",e),alert("An error occurred. Please try again.")})})})});
